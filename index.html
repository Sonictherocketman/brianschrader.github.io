<!DOCTYPE HTML>
<html>
<head>
	<title>Home - BiteofanApple</title>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">

	<link rel="stylesheet" type="text/css" href="/bin/CSS/stylesheet.css">
	<link rel="stylesheet" type="text/css" href="/bin/CSS/mobile.css">
  <link rel="icon" type="image/png" href="//www.gravatar.com/avatar/11b074a636e00292c98e3e60f7e16595?size=30">

  <link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/rss.xml"/>
	<meta property="og:type" content="article" />
</head>
<body>
	<div id="content">
		<div id="title-bar">
			<!-- Desktop Nav -->
			<!-- Name and Author -->
			<span class="menuBarItem" style="margin-left: 10px; font-size:2em;"><a href="/">BiteofanApple</a></span>
				<!-- Links -->
				<span class="menuBarItem" style="margin-left: 30px;"><a href="/archive/">Archive</a></span>
				<span class="menuBarItem"><a href="/about/">About</a></span>
				<span class="menuBarItem"><a href="https://github.com/Sonictherocketman">Code</a></span>
			  <span class="menuBarItem"><a href="http://sonicrocketman.snippets.xyz">Microblog</a></span>
			  <span class="menuBarItem"><a href="http://photos.brianschrader.com">Photos</a></span>
				<br>
				<span class="menuBarItem" style=" position:absolute; margin-top:-80px; margin-left:10px; font-size:10pt; font-style:italic;">by <a href="/about/">Brian Schrader</a></span>
			</span>

			<!-- Mobile Nav -->
			<div class="mobile-nav">
				<!-- Name and Author -->
				<div style="text-align:center; margin-top:-20pt;">
					<span class="" style="font-size:2em;"><a href="/">BiteofanApple</a></span>
				</div>
				<!-- Links -->
				<div style="margin-top:2%;">
					<span class="mobileMenuBarItem" style=""><a href="/archive/">Archive</a></span>
					<span class="mobileMenuBarItem"><a href="/about/">About</a></span>
			    <span class="mobileMenuBarItem"><a href="http://sonicrocketman.snippets.xyz">Microblog</a></span>
				</div>
			</div>
		</div>	<!-- End title-bar -->
		<div id="post-list">
			<article>
	<div class="post">
		<div class="article-title">
			<h1><a href="/archive/swift-dynamism/">
					Swift Dynamism
				</a>
			</h1>
			<small style="font-style:italic;">Posted on Mon, 30 May 2016 at 08:53 PM </small>
		</div> <!-- End article-title -->
		<div class="article-content">
			<p>There's been a lot of talk lately about Swift's relationship with dynamic runtime features. Since I've been developing in Swift for almost two months, I'm perfectly qualified to comment on it in depth, and that's what I'm now going to do (sorry).</p>
<p>First off, I like Swift's syntax a lot. Trailing closures are a thing
I didn't know I needed, and while I have a few nitpicks about the language,
overall I'm really enjoying using it.<sup>1</sup> That said, I've found myself
adopting a few strange habits when writing Swift that I'm not sure are good best
practices, but they do seem to be the way that Apple wants Swift to be written. The biggest offender, and my least favorite feature: <code>switch-case</code> statements.</p>
<p><a href="http://inessential.com/2016/05/25/oldie_complains_about_the_old_old_ways">Brent Simmons:</a></p>
<blockquote>
<p>[In the old days] There were lots of switch statements. To add, for instance, a copy (or
whatever) implementation to a particular view, you’d have to edit your event
dispatcher to know about that particular view and its copy function. Making
changes required making changes in various places. </p>
<p>- Oldie Complains About the Old Old Ways</p>
</blockquote>
<p>Swift's <code>enums</code> are very powerful, but Apple's sample code uses them for so many things.<sup>2</sup> I've found myself <code>switch-case</code>-ing through <code>enums</code> in most of my ViewControllers. It not only looks ugly, but just feels wrong. </p>
<p><a href="https://www.destroyallsoftware.com/talks/the-birth-and-death-of-javascript">Gary Bernhardt:</a></p>
<blockquote>
<p>Some apologists... [would say] that
it's the programmer's fault for using it in this way... My own view is that 
the behavior that you see a tool being used for is the behavior that that 
tool encourages.</p>
<p>- The Birth and Death of Javascript (~3:30) </p>
</blockquote>
<p>Brent, and many others, seem concerned about Swift's current relationship with
dynamic features. While I don't dismiss the "old guy complaining about the
new ways" effect, I never like to discount the opinions of long-time, seasoned platform developers. They've seen these kinds of things play out before. I haven't run into most of the other issues and concerns that Brent has brought up, but I have had to write more than a few <code>switch-case</code> statements, which is more than a few too many. </p>
<hr />
<div class="footnote">
<sup>1</sup> When Swift came out, it was a hardcore <a href="http://www.oranlooney.com/lbyl-vs-eafp/">LBYL</a> language. Now that it has <code>try</code> statements, the language feels confused. I don't know which is more "Swifty".
<br />
<sup>2</sup> In Python, the community has strong opinions about what's "Pythonic". The way Apple recommends developers write Swift will have a huge influence on what becomes the "Swifty" style.
		</div>
	</div>
</article>
<article>
	<div class="post">
		<div class="article-title">
			<h1><a href="/archive/python-like-context-managers-in-swift/">
					Python-like Context Managers in Swift
				</a>
			</h1>
			<small style="font-style:italic;">Posted on Wed, 25 May 2016 at 03:25 PM </small>
		</div> <!-- End article-title -->
		<div class="article-content">
			<p>One of the most expressive concepts in Python is the context manager, and their
simplest use case is reading and writing files.</p>
<p><code class="python"><pre>
with open('path/to/my/file') as f:
    f.write(some_data)
</pre></code></p>
<p>All of the logic that handles opening the file, checking for errors, and
closing the file is handled automatically by the <code>with</code> statement. This allows
developers to write cleaner, more expressive code without worrying about the
nitty gritty details of opening/closing files, and Python allows you to write
your own context managers. This makes it easy to clean up any code that needs
to execute in a given, safe context.</p>
<h2>Enter Swift</h2>
<p>Swift doesn't have the concept of a context manager, but they can still be easily implemented using Swift's clean and clear closure syntax.</p>
<p>One of the most helpful use-cases for a context manager in Cocoa is in a custom view's <code>drawRect</code> function. CGContexts can get confusing
if you're having to deal with them yourself. If only we had some sort of
manager for these contexts. </p>
<pre><code class="swift">
// First let's define our context manager function.
func drawBlockInSafeContext(block: (context: CGContext?) -> ()) {
    let context = UIGraphicsGetCurrentContext()
    CGContextSaveGState(context)
    block(context: context)
    CGContextRestoreGState(context)
}
class MyView: UIView {
    //...
    func drawRect(rect: CGRect) {
        drawBlockInSafeContext { context in
            // Now we can draw our view 
            // without polluting the root context 
        }
    }
}</code></pre>

<p>Context Managers are one of my favorite features of Python and I'd love to see
the concept carried over to Swift. For the record: Omar Abdelhafith has a great tutorial on making more advanced, and more <a href="https://medium.com/ios-os-x-development/swift-context-manager-implementing-python-context-manager-in-swift-f327b2b4a7d7#.oys53xm0u">Pythonic Swift Context
Managers</a>.</p>
<p><link rel="stylesheet"
href="http://yandex.st/highlightjs/8.0/styles/default.min.css">
<script src="http://yandex.st/highlightjs/8.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script></p>
		</div>
	</div>
</article>
<article>
	<div class="post">
		<div class="article-title">
			<h1><a href="/archive/mvc-n-and-services/">
					MVC-N and Services
				</a>
			</h1>
			<small style="font-style:italic;">Posted on Tue, 24 May 2016 at 10:40 AM </small>
		</div> <!-- End article-title -->
		<div class="article-content">
			<p>In a recent talk, <a href="https://realm.io/news/slug-marcus-zarra-exploring-mvcn-swift/">Marcus Zarra</a> proposed a new addition to the
Model-View-Controller paradigm, which he calls the Network Controller (MVC-N):</p>
<blockquote>
<p>We have a network controller: it talks to the internet, your local network,
or even be a flat file system. It then pushes data into your cache, into your
persistence engine. Here comes the exciting part: your entire view layer
talks to the cache only. It does not get data from the internet directly. The
ViewController’s job is to display or update that data, not to do networking
code.</p>
<p><em>Note: if you do not like the word “controller”, then “manager”, “handler”, or anything else works fine. The point is that it is a controller object, because it is not a view and not a model.</em></p>
</blockquote>
<p>I use this pattern all the time in my code, but I don't like calling it a
controller. I've started using the term <code>Service</code> to denote any class or set of
code that provides an abstraction for my View Controllers.<sup>1</sup> </p>
<p>In my code, I will typically have classes like <code>NetworkService</code>,
<code>DropboxService</code>, <code>ChatService</code>, <code>NotificationService</code>, etc. These services abstract their underlying protocols, data stores, and logic away from the View Controllers and allow for cleaner VC code.</p>
<p>I'm no where near as experienced in iOS development as Marcus is, but I like to
think of any Cocoa class that uses the <code>.shared()</code> or <code>.default()</code> paradigm as a built-in service.</p>
<pre><code class="c">
// This is a service. It abstracts the process of sending 
// notifications, and itself is not a view controller.
NSNotificationCenter.defaultCenter()
// So is this.
UIApplication.sharedApplication()
</code></pre>

<p>I've heard these kinds of classes called <code>Utility</code> classes, but I think that's
a big misnomer. Utility classes are little convenience
classes or functions that provide esoteric and unique functionality, while a
service abstracts some underlying, logically distinct functionality away from the View Controllers.</p>
<p><a href="https://realm.io/news/slug-marcus-zarra-exploring-mvcn-swift/">MVC-N: Isolating network calls from View Controllers &#8594;</a></p>
<hr />
<div class="footnote">
<sup>1</sup> Services in this sense come from the Angular term for non-view
controller related logic that handles some background communication with the
network.
</div>

<p><link rel="stylesheet"
href="http://yandex.st/highlightjs/8.0/styles/default.min.css">
<script src="http://yandex.st/highlightjs/8.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script></p>
		</div>
	</div>
</article>
<article>
	<div class="post">
		<div class="article-title">
			<h1><a href="/archive/imessage-security/">
					iMessage Security
				</a>
			</h1>
			<small style="font-style:italic;">Posted on Sun, 24 Apr 2016 at 10:29 AM </small>
		</div> <!-- End article-title -->
		<div class="article-content">
			<p>For a recent post, Rich Mogull talked with Apple about iMessage and security. I
always love to hear about cool engineering designs, and iMessage is
full them. </p>
<blockquote>
<p>Here’s a simplified overview of how iMessage security works:</p>
<ul>
<li>Each device tied to your iCloud account generates its own public/private key
pair, and sends the public key to an Apple directory server. The private key
never leaves the device, and is protected by the device’s Data Protection
encryption scheme (the one getting all the attention lately).</li>
<li>When you send an iMessage, your device checks Apple’s directory server for the public keys of all the recipients (across all their devices) based on their
Apple ID (iCloud user ID) and phone number.</li>
<li>Your phone encrypts a copy of the message to each recipient device, using its
public key. I currently have five or six devices tied to my iCloud account,
which means if you send me a message, your phone actually creates five or six
copies, each encrypted with the public key for one device.</li>
<li>For you non-security readers, a public/private keypair means that if you
encrypt something with the public key, it can only be decrypted with the
private key (and vice-versa). I never share my private key, so I can make my
public key… very public. Then people can encrypt things which only I can read
using my public key, knowing nobody else has my private keys.</li>
<li>Apple’s Push Notification Service (APN) then sends each message to its
destination device.</li>
<li>If you have multiple devices, you also encrypt and send copies to all your own devices, so each shows what you sent in the thread.</li>
</ul>
</blockquote>
<p><a href="https://securosis.com/blog/how-imessage-distributes-security-to-block-phantom-devices">How iMessage distributes security to block “phantom devices”
&#8594;</a></p>
		</div>
	</div>
</article>
<article>
	<div class="post">
		<div class="article-title">
			<h1><a href="/archive/re-voting-systems/">
					Re: Voting Systems
				</a>
			</h1>
			<small style="font-style:italic;">Posted on Fri, 15 Apr 2016 at 05:41 PM </small>
		</div> <!-- End article-title -->
		<div class="article-content">
			<p>This being an election year in the U.S., I've had a lot of conversations with friends and coworkers about various parts of the political process, voting, and of course the candidates. During these conversations I inevitably mention some point from CGP Grey's fantastic voting systems videos. If you haven't seen them already (links below), Grey explains how some of the weird quirks and pitfalls in our modern political systems are actually not at all related to the representatives or candidates, but to the underlying method that we use to elect them.</p>
<p>Politics and Law are always interesting because their results are so heavily
influenced by the way they are developed and enacted. The legal system, for example is not about the specific intent of any given law, but about how that law can be used to enact future laws and the precedent it sets. Politics works in the same way: The method we use to elect our officials affects how the officials run for office and what issues they bring up. The voting system is the lens through which we see and conduct our democracy, and, like every lens, it's not perfect.</p>
<p><a href="https://www.youtube.com/playlist?list=PL7679C7ACE93A5638">CGP Grey: Politics in the Animal
Kingdom &#8594;</a></p>
<p><a href="https://www.youtube.com/watch?v=e-ZpsxnmmbE&amp;list=PLqs5ohhass_TMG8WSUs0z3_E535dq7KzY&amp;index=2">CGP Grey: Foonnote *: I,
Phone &#8594;</a></p>
<hr />
<p><small>I'm also happy to see that Grey, against his reservations, published his
videos about the iPhone encryption debate.</small></p>
		</div>
	</div>
</article>
			<div class="post">
				<div class="article-title"><a href="/archive/"><h3>Archive</h3></a><a href="/rss.xml"><h3>RSS</h3></a></div>
			</div>
			<div style="text-align:center;">
        <div class="article-content">
          <span style="font-size:small;">
            <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
              <img alt="Creative Commons License" style="border-width:0" src="/images/misc/cc-license.png" />
            </a>
          </div>
				</div>
			</div>
		</div> <!-- End post-list -->
	</div> <!-- End content -->
</body>
</html>
